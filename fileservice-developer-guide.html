<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-12-05 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20141205" />
    <meta http-equiv="Content-Language" content="en" />
    <title>AludraTest &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>AludraTest</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-12-05
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 2.7.0-CR1
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Using AludraTest</li>
                              
      <li>
  
                          <a href="user-guide.html" title="User Guide">
          <i class="none"></i>
        User Guide</a>
            </li>
                
      <li>
  
                          <a href="actionwordlibrary.html" title="Action Word Libraries">
          <i class="none"></i>
        Action Word Libraries</a>
            </li>
                
      <li>
  
                          <a href="service-configuration.html" title="Service Configuration">
          <i class="none"></i>
        Service Configuration</a>
            </li>
                
      <li>
  
                          <a href="log4testing-user-guide.html" title="Log4Testing">
          <i class="none"></i>
        Log4Testing</a>
            </li>
                
      <li>
  
                          <a href="codechecks.html" title="Code Checks">
          <i class="none"></i>
        Code Checks</a>
            </li>
                
      <li>
  
                          <a href="aludra-pmd-rules.html" title="PMD Ruleset">
          <i class="none"></i>
        PMD Ruleset</a>
            </li>
                              <li class="nav-header">AludraTest Services</li>
                              
      <li>
  
                          <a href="fileservice.html" title="File Service">
          <i class="none"></i>
        File Service</a>
            </li>
                
      <li>
  
                          <a href="flatfileservice.html" title="FlatFile Service">
          <i class="none"></i>
        FlatFile Service</a>
            </li>
                
      <li>
  
                          <a href="separatedfileservice.html" title="SeparatedFile Service">
          <i class="none"></i>
        SeparatedFile Service</a>
            </li>
                              <li class="nav-header">Extending AludraTest</li>
                              
      <li>
  
                          <a href="aludratest-developer-guide.html" title="Developer Guide">
          <i class="none"></i>
        Developer Guide</a>
            </li>
                
      <li>
  
                          <a href="developing-service.html" title="Develop a Service">
          <i class="none"></i>
        Develop a Service</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>FileService Developer Guide</a>
          </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                    
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <?xml version='1.0' encoding='utf-8' ?><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head><body><h1 id="FileService_Developer_Guide">FileService Developer Guide</h1><p>This document describes the internal mechanisms used in the implementation of the AludraTest FileService. Its intended audience is the maintainers and extenders of the AludraTest Framework.</p><h2 id="Class_Diagram">Class Diagram</h2><p><img border="0" src="./images/FileServiceImpl.png"/></p><h2 id="Interfaces">Interfaces</h2><p>The FileService follows the AludraService conventions defining an Interface FileService with methods that provide file-realated action interfaces:</p><ul><li>perform(): FileInteraction</li><li>verify(): FileVerification</li><li>check(): FileCondition</li></ul><h2 id="Implementation">Implementation</h2><p>The FileService implementation resides in package <code>org.aludratest.service.file.impl</code>. It uses the <a href="http://commons.apache.org/proper/commons-vfs/">Commons VFS</a> API and its implementations to access different types of file systems in a uniform manner while completely hiding the Common VFS classes from the user. Thus, commons-vfs may be exchanged with another library without any affect on the test code that invokes the FileService.</p><h3 id="FileServiceImpl">FileServiceImpl</h3><p>The class <code>FileServiceImpl</code> implements the FileService interface.</p><p>Since the feature set is not too big, a single class was designed to implement all three action interfaces: FileActionImpl. The FileServiceImpl holds only a single instance of the FileActionImpl and returns this from any call to perform(), verify() and check().</p><p>FileServiceImpl creates a FileServiceConfiguration and hands it over to the FileActionImpl. When closing the service, also the configuration must be closed, since it manages the Commons VFS resources.</p><h3 id="FileServiceConfiguration">FileServiceConfiguration</h3><p>The FileServiceConfiguration object is created using the FileService Preferences (passed by the framework via the Configurable interface). After that, it queries all configuration properties to assure the configuration is complete. </p><h2 id="Commons_VFS">Commons VFS</h2><h3 id="Commons_VFS_API">Commons VFS API</h3><p>Core classes of Commons VFS are the StandardFileSystemManager and the class FileObject. The first one provides access to a file system and the latter one represents an element in a file system: a file or a directory.</p><p>Commons VFS is able to support arbirary file systems by a plugin mechanism which is configured in an XML file, <code>META-INF/vfs-providers.xml</code>, and evaluated by the StandardFileSystemManager.</p><h3 id="Plugging_in_File_System_Types">Plugging in File System Types</h3><p>The VFS configuration file <code>META-INF/vfs-providers.xml</code> resides in AludraTest's folder <code>src/main/resources</code>. The current configuration is:</p><div class="source"><pre class="prettyprint">&lt;?xml version="1.0" encoding="UTF-8"&nbsp;>
&lt;providers> 
   &lt;provider class-name="org.apache.commons.vfs2.provider.ftp.FtpFileProvider" />
   &lt;provider class-name="org.apache.commons.vfs2.provider.sftp.SftpFileProvider" />
   &lt;provider class-name="org.apache.commons.vfs2.provider.http.HttpFileProvider" />
   &lt;provider class-name="org.apache.commons.vfs2.provider.https.HttpsFileProvider" />
&lt;/providers>
</pre></div><p>If support for further file systems is desired in the future, this is the place to start.</p><h3 id="VFS_integration_into_FileService">VFS integration into FileService</h3><p>Commons VFS' <code>StandardFileSystemManager</code> is wrapped by FileService's class <code>FileServiceConfig</code>. It is responsible for creating and closing it.</p><p>Note that closing a network connection (e.g. FTP) happens when the related FileSystemManager is close()d.</p><h3 id="FileObject_Abstraction">FileObject Abstraction</h3><p>In Commons VFS, each file system item is represented by a FileObject. AludraTest's FileService uses a path string (relative from the file system's base directory) to represent a file.</p><p>Mapping a file path to a FileObject happens in FileServiceConfiguration's getFileObject() method, the opposite transformation in pathFromRoot().</p><h3 id="Special_adapter_classes">Special adapter classes</h3><p>For copy operations, VFS requires a FileSelector implementation to select the files to be copied. FileService provides a <b>FilePathSelector</b> to include only a single file by its path.</p><p>There exists an enumeration class <b>Linefeed</b> with to instances, <b>WINDOWS</b> and <b>UNIX</b> (providing the linefeeds \r\n and \n) which are used to simplify configuration file parsing.</p><h2 id="Links">Links</h2><ul><li><a href="http://commons.apache.org/proper/commons-vfs/">Commons VFS</a></li></ul></body></html>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2014
                        <a href="http://www.aludratest.org/">aludratest.org</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
